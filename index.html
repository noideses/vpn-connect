<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lue VPN</title>
    <style>
        body { font-family: -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background-color: #000; color: white; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; padding: 20px; text-align: center; }
        .card { background: #1c1c1e; padding: 30px 20px; border-radius: 24px; width: 100%; max-width: 400px; box-shadow: 0 4px 20px rgba(255,255,255,0.1); }
        h1 { margin: 0 0 10px; font-size: 22px; }
        p { color: #8e8e93; margin-bottom: 25px; font-size: 15px; }
        .btn { display: flex; align-items: center; justify-content: center; width: 100%; padding: 16px 0; border-radius: 14px; font-weight: 600; font-size: 16px; text-decoration: none; margin-bottom: 12px; border: none; cursor: pointer; transition: 0.2s; }
        .btn:active { opacity: 0.8; transform: scale(0.98); }
        .btn-primary { background-color: #007aff; color: white; }
        .btn-secondary { background-color: #34c759; color: white; }
        .debug { font-size: 10px; color: #333; margin-top: 20px; word-break: break-all; }
    </style>
</head>
<body>
    <div class="card">
        <h1>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Lue VPN</h1>
        <p>–ù–∞–∂–º–∏—Ç–µ —Å–∏–Ω—é—é –∫–Ω–æ–ø–∫—É. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –∏ –¥–æ–±–∞–≤–∏—Ç –ø–æ–¥–ø–∏—Å–∫—É.</p>
        
        <!-- –ö–Ω–æ–ø–∫–∞ -->
        <a id="btn-open" href="#" class="btn btn-primary">üöÄ –î–æ–±–∞–≤–∏—Ç—å –≤ v2RayTun</a>
        
        <p style="font-size: 13px; margin: 15px 0 10px;">–ï—Å–ª–∏ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ ‚Äî —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á:</p>
        <button id="btn-copy" class="btn btn-secondary" onclick="copyLink()">üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
        <div id="debug-link" class="debug">...</div>
    </div>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const subLink = urlParams.get('sub');
        
        if (subLink) {
            document.getElementById('debug-link').innerText = "–ö–ª—é—á –∑–∞–≥—Ä—É–∂–µ–Ω";
            
            // --- –§–ò–ù–ê–õ–¨–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï ---
            // 1. –ò—Å–ø–æ–ª—å–∑—É–µ–º v2raytun:// (—á—Ç–æ–±—ã —Ç–æ—á–Ω–æ –æ—Ç–∫—Ä—ã–ª–æ—Å—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
            // 2. –ò—Å–ø–æ–ª—å–∑—É–µ–º install-sub (—á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É —Å –∏–º–µ–Ω–µ–º)
            // 3. –¢–∞–∫ –∫–∞–∫ —É –Ω–∞—Å —Ç–µ–ø–µ—Ä—å HTTPS, —ç—Ç–æ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç!
            const deepLink = "v2raytun://install-sub?url=" + encodeURIComponent(subLink) + "&name=LueVPN";
            
            const btn = document.getElementById('btn-open');
            btn.href = deepLink;
            
            // –ê–≤—Ç–æ-–æ—Ç–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ 1 —Å–µ–∫
            setTimeout(() => { window.location.href = deepLink; }, 1000);
        }

        function copyLink() {
            if (!subLink) return;
            navigator.clipboard.writeText(subLink).then(() => {
                const btn = document.getElementById('btn-copy');
                btn.innerText = "‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!";
                // –¢–µ–ø–µ—Ä—å, –ø—Ä–∏ —Ä—É—á–Ω–æ–º –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏, HTTPS —Å—Å—ã–ª–∫–∞ —Ç–æ–∂–µ –ø–æ–∫–∞–∂–µ—Ç –≤—Å—é –∏–Ω—Ñ—É
                setTimeout(() => { btn.innerText = "üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É"; }, 2000);
            });
        }
    </script>
</body>
</html>

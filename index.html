<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lue VPN</title>
    <style>
        body { font-family: -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background-color: #000; color: white; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; padding: 20px; text-align: center; }
        .card { background: #1c1c1e; padding: 30px 20px; border-radius: 24px; width: 100%; max-width: 400px; box-shadow: 0 4px 20px rgba(255,255,255,0.1); }
        h1 { margin: 0 0 10px; font-size: 22px; }
        p { color: #8e8e93; margin-bottom: 25px; font-size: 15px; }
        .btn { display: flex; align-items: center; justify-content: center; width: 100%; padding: 16px 0; border-radius: 14px; font-weight: 600; font-size: 16px; text-decoration: none; margin-bottom: 12px; border: none; cursor: pointer; transition: 0.2s; }
        .btn:active { opacity: 0.8; transform: scale(0.98); }
        .btn-primary { background-color: #007aff; color: white; }
        .btn-secondary { background-color: #34c759; color: white; }
        .debug { font-size: 10px; color: #333; margin-top: 20px; word-break: break-all; }
    </style>
</head>
<body>
    <div class="card">
        <h1>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Lue VPN</h1>
        <p>–ù–∞–∂–º–∏—Ç–µ —Å–∏–Ω—é—é –∫–Ω–æ–ø–∫—É. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –∏ –¥–æ–±–∞–≤–∏—Ç –ø–æ–¥–ø–∏—Å–∫—É.</p>
        <a id="btn-open" href="#" class="btn btn-primary">üöÄ –î–æ–±–∞–≤–∏—Ç—å –≤ v2RayTun</a>
        <p style="font-size: 13px; margin: 15px 0 10px;">–ï—Å–ª–∏ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ ‚Äî —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á:</p>
        <button id="btn-copy" class="btn btn-secondary" onclick="copyLink()">üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
        <div id="debug-link" class="debug">...</div>
    </div>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const subLink = urlParams.get('sub');
        
        if (subLink) {
            document.getElementById('debug-link').innerText = "–ö–ª—é—á –∑–∞–≥—Ä—É–∂–µ–Ω";
            
            // --- –ì–õ–ê–í–ù–û–ï –ò–ó–ú–ï–ù–ï–ù–ò–ï ---
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º v2box://. v2RayTun –ø–æ–Ω–∏–º–∞–µ—Ç —ç—Ç–æ—Ç —Ñ–æ—Ä–º–∞—Ç –ª—É—á—à–µ –≤—Å–µ–≥–æ.
            const deepLink = "v2box://install-sub?url=" + encodeURIComponent(subLink) + "&name=LueVPN";
            
            const btn = document.getElementById('btn-open');
            btn.href = deepLink;
            
            // –ê–≤—Ç–æ-–æ—Ç–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ 1 —Å–µ–∫
            setTimeout(() => { window.location.href = deepLink; }, 1000);
        }

        function copyLink() {
            if (!subLink) return;
            navigator.clipboard.writeText(subLink).then(() => {
                const btn = document.getElementById('btn-copy');
                btn.innerText = "‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!";
                // –í–∞–∂–Ω–æ: –¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ —É –Ω–∞—Å –µ—Å—Ç—å HTTPS, –∫–Ω–æ–ø–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è 
                // –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—Å—Ç–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —á–µ—Ä–µ–∑ "Import from Clipboard" 
                // –∏ –æ–Ω–æ –ü–û–ö–ê–ñ–ï–¢ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É, —Ç–∞–∫ –∫–∞–∫ —Å—Å—ã–ª–∫–∞ —Ç–µ–ø–µ—Ä—å –±–µ–∑–æ–ø–∞—Å–Ω–∞—è.
                setTimeout(() => { btn.innerText = "üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É"; }, 2000);
            });
        }
    </script>
</body>
</html>

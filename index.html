<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lue VPN</title>
    <style>
        body { font-family: -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background-color: #000; color: white; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; padding: 20px; text-align: center; }
        .card { background: #1c1c1e; padding: 30px 20px; border-radius: 24px; width: 100%; max-width: 400px; box-shadow: 0 4px 20px rgba(255,255,255,0.1); }
        h1 { margin: 0 0 10px; font-size: 22px; }
        p { color: #8e8e93; margin-bottom: 25px; font-size: 15px; }
        
        .btn { display: flex; align-items: center; justify-content: center; width: 100%; padding: 16px 0; border-radius: 14px; font-weight: 600; font-size: 16px; text-decoration: none; margin-bottom: 12px; border: none; cursor: pointer; transition: 0.2s; }
        .btn:active { opacity: 0.8; transform: scale(0.98); }
        
        .btn-primary { background-color: #007aff; color: white; } /* –°–∏–Ω—è—è */
        .btn-secondary { background-color: #34c759; color: white; } /* –ó–µ–ª–µ–Ω–∞—è */
        
        .debug { font-size: 10px; color: #333; margin-top: 20px; word-break: break-all; }
    </style>
</head>
<body>

    <div class="card">
        <h1>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Lue VPN</h1>
        <p>–ù–∞–∂–º–∏—Ç–µ —Å–∏–Ω—é—é –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.</p>

        <!-- –ö–Ω–æ–ø–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç–∫—Ä—ã—Ç–∏—è -->
        <a id="btn-open" href="#" class="btn btn-primary">üöÄ –î–æ–±–∞–≤–∏—Ç—å –≤ v2RayTun</a>
        
        <p style="font-size: 13px; margin: 15px 0 10px;">–ï—Å–ª–∏ –Ω–µ –æ—Ç–∫—Ä—ã–ª–æ—Å—å ‚Äî —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á:</p>

        <!-- –ö–Ω–æ–ø–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è -->
        <button id="btn-copy" class="btn btn-secondary" onclick="copyLink()">üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á</button>
        
        <div id="debug-link" class="debug">...</div>
    </div>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const subLink = urlParams.get('sub');
        
        if (subLink) {
            document.getElementById('debug-link').innerText = "–ö–ª—é—á –∑–∞–≥—Ä—É–∂–µ–Ω";
            
            // --- –ò–ó–ú–ï–ù–ï–ù–ò–ï –ó–î–ï–°–¨ ---
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ö–µ–º—É v2raytun:// –≤–º–µ—Å—Ç–æ v2rayng://
            // –≠—Ç–æ –∑–∞—Å—Ç–∞–≤–∏—Ç —Ç–µ–ª–µ—Ñ–æ–Ω –æ—Ç–∫—Ä—ã—Ç—å –∏–º–µ–Ω–Ω–æ v2RayTun
            const deepLink = "v2raytun://install-sub?url=" + encodeURIComponent(subLink) + "&name=LueVPN";
            
            // –ù–∞–∑–Ω–∞—á–∞–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ –∫–Ω–æ–ø–∫—É
            const btnOpen = document.getElementById('btn-open');
            btnOpen.href = deepLink;
            
            // –ü—ã—Ç–∞–µ–º—Å—è –æ—Ç–∫—Ä—ã—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É
            setTimeout(() => {
                window.location.href = deepLink;
            }, 1000);

        } else {
            document.querySelector('h1').innerText = "–û—à–∏–±–∫–∞";
            document.querySelector('p').innerText = "–ù–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ –ø–æ–¥–ø–∏—Å–∫—É";
        }

        function copyLink() {
            if (!subLink) return;
            navigator.clipboard.writeText(subLink).then(() => {
                const btn = document.getElementById('btn-copy');
                btn.innerText = "‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!";
                setTimeout(() => { btn.innerText = "üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á"; }, 2000);
            }).catch(err => {
                alert("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Ä—É—á–Ω—É—é.");
            });
        }
    </script>
</body>
</html>
